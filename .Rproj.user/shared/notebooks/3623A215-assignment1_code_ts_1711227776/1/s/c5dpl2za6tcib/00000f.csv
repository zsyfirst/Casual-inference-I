"0","set.seed(12345)"
"0","trialsample <- popn[sample(1:nrow(popn), 100, replace=FALSE),]"
"0","# Randomly assign each member of the sample to treatment or control groups"
"0","trialsample$treatment <- rbinom(100, size=1, prob=0.5)"
"0",""
"0","# Take the difference in sample means as an estimate of the treatment effect"
"0","# In treatment==1 group, y(1) is actually observed, while y(0) is not. The opposite is true in the treatment==0 group"
"0","effect <- mean(trialsample$y1[trialsample$treatment==1])-mean(trialsample$y0[trialsample$treatment==0])"
"0","print(effect)"
"1","[1]"
"1"," 1.014851"
"1","
"
"0","###alternatively"
"0","#set.seed(67890)"
"0","#trialsample <- popn[sample(1:N, 100, replace=FALSE),] #randomly select 100 people (sample without replacement, a row can only be selected once)"
"0","#trialsample$treatment <- rbinom(100, size=1, prob=0.5) # Randomly assign each member of the sample to treatment or control groups"
"0","#trialsample$y <- with(trialsample, ifelse(treatment == 1, y1, y0)) #Generate observed outcomes (y)"
"0","# Treatment effect - the difference in sample means"
"0","#effect <- with(trialsample, mean(y[treatment==1])-mean(y[treatment==0]))"
"0","#effect"
